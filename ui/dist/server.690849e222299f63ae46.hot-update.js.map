{"version":3,"sources":["webpack:///./server/uiserver.js"],"names":["app","express","SourceMapSupport","install","dotenv","config","port","process","env","UI_SERVER_PORT","require","apiProxyTarget","API_PROXY_TARGET","enableHMR","ENABLE_HMR","console","log","webpack","devMiddleware","hotMiddleware","entry","push","plugins","HotModuleReplacementPlugin","compiler","use","proxy","target","changeOrigin","UI_API_ENDPOINT","UI_SERVER_API_ENDPOINT","static","req","res","next","header","get","send","JSON","stringify","headersSent","render","sendFile","path","resolve","listen","module","hot","accept"],"mappings":"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","file":"server.690849e222299f63ae46.hot-update.js","sourcesContent":["import dotenv from \"dotenv\";\nimport path from \"path\";\nimport express from \"express\";\nimport proxy from \"http-proxy-middleware\";\nimport SourceMapSupport from \"source-map-support\";\nimport render from \"./render.jsx\";\nconst app = express();\nSourceMapSupport.install();\ndotenv.config();\nconst port = process.env.UI_SERVER_PORT;\nconst config = require(\"../webpack.config.js\")[0];\nconst apiProxyTarget = process.env.API_PROXY_TARGET;\nconst enableHMR = (process.env.ENABLE_HMR || \"true\") === \"true\";\n\nif (enableHMR && process.env.NODE_ENV !== \"production\") {\n  console.log(\"Adding dev middleware, enabling HMR\");\n  const webpack = require(\"webpack\");\n  const devMiddleware = require(\"webpack-dev-middleware\");\n  const hotMiddleware = require(\"webpack-hot-middleware\");\n  config.entry.app.push(\"webpack-hot-middleware/client\");\n  config.plugins = config.plugins || [];\n  config.plugins.push(new webpack.HotModuleReplacementPlugin());\n  const compiler = webpack(config);\n  app.use(devMiddleware(compiler));\n  app.use(hotMiddleware(compiler));\n}\n\nif (apiProxyTarget) {\n  app.use(\n    \"/graphql\",\n    proxy({\n      target: apiProxyTarget,\n      changeOrigin: true\n    })\n  );\n}\n\nif (!process.env.UI_API_ENDPOINT) {\n  process.env.UI_API_ENDPOINT = \"http://localhost:2000/graphql\";\n}\nif (!process.env.UI_SERVER_API_ENDPOINT) {\n  process.env.UI_API_ENDPOINT = process.env.UI_API_ENDPOINT;\n}\n\napp.use(express.static(\"public\"), function(req, res, next) {\n  const env = { UI_API_ENDPOINT: process.env.UI_API_ENDPOINT };\n  res.header(\"Access-Control-Allow-Origin\", env); // update to match the domain you will make the request from\n  res.header(\n    \"Access-Control-Allow-Headers\",\n    \"Origin, X-Requested-With, Content-Type, Accept\"\n  );\n  next();\n});\n\napp.get(\"/env.js\", (req, res) => {\n  const env = { UI_API_ENDPOINT: process.env.UI_API_ENDPOINT };\n  res.send(`window.ENV = ${JSON.stringify(env)}`);\n  console.log(res.headersSent);\n});\n\napp.get(\"/about\", (req, res, next) => {\n  render(req, res, next);\n});\n\napp.get(\"*\", (req, res) => {\n  res.sendFile(path.resolve(\"public/index.html\"));\n});\napp.listen(port, function() {\n  console.log(`ui server started on port ${port}`);\n});\nif (module.hot) {\n  module.hot.accept(\"./render.jsx\");\n}\n"],"sourceRoot":""}