{"version":3,"sources":["webpack:///./server/uiserver.js"],"names":["app","express","SourceMapSupport","install","dotenv","config","port","process","env","UI_SERVER_PORT","require","apiProxyTarget","API_PROXY_TARGET","UI_API_ENDPOINT","enableHMR","ENABLE_HMR","console","log","webpack","devMiddleware","hotMiddleware","entry","push","plugins","HotModuleReplacementPlugin","compiler","use","proxy","target","changeOrigin","static","req","res","next","header","get","send","JSON","stringify","headersSent","render","sendFile","path","resolve","listen","module","hot","accept"],"mappings":"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","file":"server.ef3a7ad67ec18e39718c.hot-update.js","sourcesContent":["import dotenv from \"dotenv\";\nimport path from \"path\";\nimport express from \"express\";\nimport proxy from \"http-proxy-middleware\";\nimport SourceMapSupport from \"source-map-support\";\nimport render from \"./render.jsx\";\nconst app = express();\nSourceMapSupport.install();\ndotenv.config();\nconst port = process.env.UI_SERVER_PORT;\nconst config = require(\"../webpack.config.js\")[0];\nconst apiProxyTarget = process.env.API_PROXY_TARGET;\nconst UI_API_ENDPOINT = process.env.UI_API_ENDPOINT || \"/graphql\";\nconst env = { UI_API_ENDPOINT };\nconst enableHMR = (process.env.ENABLE_HMR || \"true\") === \"true\";\n\nif (enableHMR && process.env.NODE_ENV !== \"production\") {\n  console.log(\"Adding dev middleware, enabling HMR\");\n  const webpack = require(\"webpack\");\n  const devMiddleware = require(\"webpack-dev-middleware\");\n  const hotMiddleware = require(\"webpack-hot-middleware\");\n  config.entry.app.push(\"webpack-hot-middleware/client\");\n  config.plugins = config.plugins || [];\n  config.plugins.push(new webpack.HotModuleReplacementPlugin());\n  const compiler = webpack(config);\n  app.use(devMiddleware(compiler));\n  app.use(hotMiddleware(compiler));\n}\n\nif (apiProxyTarget) {\n  app.use(\n    \"/graphql\",\n    proxy({\n      target: apiProxyTarget,\n      changeOrigin: true\n    })\n  );\n}\n\nif (!process.env.UI_API_ENDPOINT) {\n  process.env.UI_API_ENDPOINT = \"http://localhost:2000/graphql\";\n}\n\napp.use(express.static(\"public\"), function(req, res, next) {\n  res.header(\"Access-Control-Allow-Origin\", env); // update to match the domain you will make the request from\n  res.header(\n    \"Access-Control-Allow-Headers\",\n    \"Origin, X-Requested-With, Content-Type, Accept\"\n  );\n  next();\n});\n\napp.get(\"/env.js\", (req, res) => {\n  res.send(`window.ENV = ${JSON.stringify(env)}`);\n  console.log(res.headersSent);\n});\n\napp.get(\"/about\", (req, res, next) => {\n  render(req, res, next);\n});\n\napp.get(\"*\", (req, res) => {\n  res.sendFile(path.resolve(\"public/index.html\"));\n});\napp.listen(port, function() {\n  console.log(`ui server started on port ${port}`);\n});\nif (module.hot) {\n  module.hot.accept(\"./render.jsx\");\n}\n"],"sourceRoot":""}